<!DOCTYPE html>


  


<html class="theme-next mist use-motion" lang="en-US">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.0.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.4">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.4" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.0.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  
  <meta name="keywords" content="Hexo, NexT" />


<meta name="description" content="个人笔记">
<meta property="og:type" content="website">
<meta property="og:title" content="FFshine">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="FFshine">
<meta property="og:description" content="个人笔记">
<meta property="og:locale" content="en-US">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="FFshine">
<meta name="twitter:description" content="个人笔记">






  <link rel="canonical" href="http://yoursite.com/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>
  <title>FFshine</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>
<body itemscope itemtype="http://schema.org/WebPage" lang="en-US">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">FFshine</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">读书 学习 生活</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Home</a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />Archives</a>
        </li>
      

      
    </ul>
  

  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ffshine">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FFshine">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-07T20:08:10+08:00">2018-05-07</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

          
        
      
    </div>

    
    
    <div>
  
</div>

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/Google-is-bleeding-cash-trying-to-take-on-Amazon-in-the-smart-home/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ffshine">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FFshine">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/Google-is-bleeding-cash-trying-to-take-on-Amazon-in-the-smart-home/" itemprop="url">Google is bleeding cash trying to take on Amazon in the smart home</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-24T18:21:03+08:00">2018-04-24</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>from <a href="https://www.theverge.com/2018/4/23/17272748/alphabet-google-q1-2018-earnings-nest-smart-home-amazon-competition" target="_blank" rel="noopener">The Verge</a></p>
</blockquote>
<p><em>New financial figures for Nest shed light on Google’s race to be the eyes and ears of the smart home</em></p>
<p><img src="http://p7on1idpr.bkt.clouddn.com/static/images/vpavic_170518_1705_00.jpg" alt="Photo by Vjeran Pavic / The Verge"></p>
<p>Google parent company Alphabet <a href="https://abc.xyz/investor/pdf/2018Q1_alphabet_earnings_release.pdf" target="_blank" rel="noopener">reported first quarter earnings for 2018 today</a>, beating Wall Street estimates on sales and profit thanks in large part to its mammoth search advertising machine that continues to grow year after year. But one interesting highlight from the earnings announcement was just how much money the company’s smart home company Nest earns in revenue and reports in losses.</p>
<p>Because Nest was <a href="https://www.theverge.com/2018/2/7/16987002/nest-google-alphabet-smart-home-competition-amazon-alexa-apple" target="_blank" rel="noopener">rolled back into Google proper earlier this year</a>, Alphabet recast its quarterly earnings figures for 2017 to account for the fact that Nest revenues and losses would be moved from the “Other Bets” section of Alphabet’s business to the standard Google revenue line item. Comparing the differences in quarterly revenues and operating income, we can see that Nest made about $726 million in revenue, yet it ultimately contributed a $621 million loss to the “Other Bets” section throughout the year. In other words, Google spent more than half a billion dollars last year to establish Nest in sectors like security cameras, alarm systems, and video doorbells.</p>
<p>As <a href="https://twitter.com/jank0/status/988517931230244865" target="_blank" rel="noopener">pointed out by Variety’s Janko Roettgers</a>, it’s likely Google is similarly spending hundreds of millions of dollars, if not billions, on its other hardware efforts like Google Home and Pixel phones, earbuds, and laptops. With each one of those product categories, Google is competing with a different tech industry juggernaut. With phones, Google is taking on Apple and the iPhone. With the Pixelbook and other Chrome-powered laptops, Google is taking on Microsoft. But perhaps most importantly, with Google Home and Nest, the company is taking on Amazon, the clear market leader in the smart home thanks to its Echo line and the pervasiveness of its Alexa digital assistant.</p>
<p>Google has shown that it’s more than willing to spend the money necessary to establish itself in saturated markets like laptops and smartphones. But nobody expects the Pixel line of phones to ever outsell the iPhone, least of all Google leadership. Yet where the company does have a clear advantage and an opportunity to catch up to Amazon is in artificial intelligence-powered devices, like smart speakers.</p>
<p>That’s precisely why Nest was folded back into Google, so that its smart home devices could make better use of the AI features being built exclusively for Google hardware and software products like the Pixel 2 and Google Assistant. “All of Google’s investments in machine learning and AI, they can very clearly benefit Nest products. It just makes sense to be developing them together,” Rick Osterloh, the head of Google’s hardware division, <a href="https://www.cnet.com/news/alphabet-beats-estimates-with-nest-in-google-fold-first-quarter-earnings/" target="_blank" rel="noopener">told CNET in an interview</a> at the time of the Nest announcement. “It’s the natural thing to evolve to.”</p>
<p>Of course, Google has the money to spend. Alphabet generated around $31.15 billion in sales during the first quarter, compared to $24.75 billion from the same time a year ago. In terms of profit, Alphabet earned $9.4 billion, compared to just $5.43 billion last year. So the core business is still doing astonishingly well, giving Google enough capital to make these kinds of long-term hardware investments that bank on an increasingly symbiotic relationship between the smart home and AI. But as we can see from these new numbers — a rare insight into one of Google’s more ancillary businesses — it’s clear the battle against a company as big and formidable as Amazon costs quite a lot. And it’s not going to end any time soon.</p>

          
        
      
    </div>

    
    
    <div>
  
</div>

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/signalsAndSlots/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ffshine">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FFshine">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/signalsAndSlots/" itemprop="url">Qt信号与槽</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-10T15:20:35+08:00">2018-03-10</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Qt/" itemprop="url" rel="index"><span itemprop="name">Qt</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><blockquote>
<p>信号槽是 Qt 框架引以为豪的机制之一。熟练使用和理解信号槽，能够设计出解耦的非常漂亮的程序，有利于增强我们的技术设计能力。</p>
</blockquote>
<blockquote>
<p>所谓信号槽，实际就是观察者模式。当某个事件发生之后，比如，按钮检测到自己被点击了一下，它就会发出一个信号（signal）。这种发出是没有目的的，类似广播。如果有对象对这个信号感兴趣，它就会使用连接（connect）函数，意思是，用自己的一个函数（成为槽（slot））来处理这个信号。也就是说，当信号发出时，被连接的槽函数会自动被回调。这就类似观察者模式：当发生了感兴趣的事件，某一个操作就会被自动触发。</p>
</blockquote>
<hr>
<h2 id="信号与槽示例"><a href="#信号与槽示例" class="headerlink" title="信号与槽示例"></a>信号与槽示例</h2><p>例如一段简单的代码：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// !!! Qt 5</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QPushButton&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">  <span class="function">QApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"> </span><br><span class="line">  <span class="function">QPushButton <span class="title">button</span><span class="params">(<span class="string">"Quit"</span>)</span></span>;</span><br><span class="line">  QObject::connect(&amp;button, &amp;QPushButton::clicked, &amp;QApplication::quit);</span><br><span class="line">  button.show();</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">return</span> app.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>程序中，按钮<code>button</code>在按下去的时候执行<code>QApplication</code>的<code>quit</code>函数。而实现这一切的是<code>QObject::connect</code>。Qt的信号与槽主要是围绕这个函数展开。</p>
<p>在Qt5 中<code>QObject::connect()</code>有五个重载：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">QMetaObject::<span class="function">Connection <span class="title">connect</span><span class="params">(<span class="keyword">const</span> QObject *, <span class="keyword">const</span> <span class="keyword">char</span> *,</span></span></span><br><span class="line"><span class="function"><span class="params">                                <span class="keyword">const</span> QObject *, <span class="keyword">const</span> <span class="keyword">char</span> *,</span></span></span><br><span class="line"><span class="function"><span class="params">                                Qt::ConnectionType)</span></span>;</span><br><span class="line"> </span><br><span class="line">QMetaObject::<span class="function">Connection <span class="title">connect</span><span class="params">(<span class="keyword">const</span> QObject *, <span class="keyword">const</span> QMetaMethod &amp;,</span></span></span><br><span class="line"><span class="function"><span class="params">                                <span class="keyword">const</span> QObject *, <span class="keyword">const</span> QMetaMethod &amp;,</span></span></span><br><span class="line"><span class="function"><span class="params">                                Qt::ConnectionType)</span></span>;</span><br><span class="line"> </span><br><span class="line">QMetaObject::<span class="function">Connection <span class="title">connect</span><span class="params">(<span class="keyword">const</span> QObject *, <span class="keyword">const</span> <span class="keyword">char</span> *,</span></span></span><br><span class="line"><span class="function"><span class="params">                                <span class="keyword">const</span> <span class="keyword">char</span> *,</span></span></span><br><span class="line"><span class="function"><span class="params">                                Qt::ConnectionType)</span> <span class="keyword">const</span></span>;</span><br><span class="line"> </span><br><span class="line">QMetaObject::<span class="function">Connection <span class="title">connect</span><span class="params">(<span class="keyword">const</span> QObject *, PointerToMemberFunction,</span></span></span><br><span class="line"><span class="function"><span class="params">                                <span class="keyword">const</span> QObject *, PointerToMemberFunction,</span></span></span><br><span class="line"><span class="function"><span class="params">                                Qt::ConnectionType)</span></span></span><br><span class="line"><span class="function"> </span></span><br><span class="line">QMetaObject::Connection connect(const QObject *, PointerToMemberFunction,</span><br><span class="line">                                Functor);</span><br></pre></td></tr></table></figure></p>
<p>五个重载的返回值都是 <code>QMetaObject::Connection</code>，这并不是我们现在要关心的东西。<code>connect()</code>函数最常用的一般形式为：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">connect(sender, signal, </span><br><span class="line">        receiver, slot);</span><br></pre></td></tr></table></figure></p>
<p><code>connect</code> 一般会用到四个参数，第一个为 <code>发出信号的对象</code>，第二个为 <code>发出对象发出的信号</code>，第三个为 <code>接收信号的对象</code>，第四个为 <code>接收对象在接收到信号要进行的操作</code>。也就是说：<code>sender发出signal，receiver接收到signal之后执行slot</code>。</p>
<p>所以我们可以套用这个形式去分析上面五个重载函数：</p>
<ol>
<li><p><code>sender</code> 与 <code>receiver</code> 类型都是 <code>const QObject</code>，<code>signal</code> 与 <code>slot</code> 都是 <code>const char *</code> 这是将 <code>signal</code> 与 <code>slot</code> 都当做字符处理。</p>
</li>
<li><p><code>sender</code> 与 <code>receiver</code> 同样是 <code>const QObject</code> ，但 <code>signal</code> 与 <code>slot</code> 是 <code>const QMetaMethod &amp;</code>。 们可以将每个函数看做是 <code>QMetaMethod</code> 的子类。因此，这种写法可以使用 <code>QMetaMethod</code> 进行类型比对。</p>
</li>
<li><p><code>sender</code> 同样是 <code>const QObject *</code>，<code>signal</code> 和 <code>slot</code> 同样是 <code>const char *</code>，但是却缺少了 <code>receiver</code>。这个函数其实是将 <code>this</code> 指针作为 <code>receiver</code>。</p>
</li>
<li><p><code>sender</code> 和 <code>receiver</code> 也都存在，都是 <code>const QObject *</code>，但是 <code>signal</code> 和 <code>slot</code> 类型则是<code>PointerToMemberFunction</code>。看这个名字就应该知道，这是指向成员函数的指针。</p>
</li>
<li><p>前面两个参数没有什么不同，最后一个参数是 <code>Functor</code> 类型。这个类型可以接受 <code>static</code> 函数、全局函数以及 <code>Lambda</code> 表达式。</p>
</li>
</ol>
<hr>
<p>由此我们可以看出，<code>connect()</code> 函数，<code>sender</code> 和 <code>receiver</code> 没有什么区别，都是 <code>QObject</code> 指针；主要是 <code>signal</code> 和 <code>slot</code> 形式的区别。具体到我们的示例，我们的 <code>connect()</code> 函数显然是使用的第五个重载，最后一个参数是 <code>QApplication</code> 的 <code>static</code> 函数 <code>quit()</code>。也就是说，当我们的 <code>button</code> 发出了 <code>clicked()</code> 信号时，会调用 <code>QApplication</code> 的 <code>quit()</code> 函数，使程序退出。</p>
<p>Qt4 的信号槽与Qt5类似。在Qt4 中的 <code>QObject</code> 中，有三个不同的 <code>connect()</code> 重载：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">connect</span><span class="params">(<span class="keyword">const</span> QObject *, <span class="keyword">const</span> <span class="keyword">char</span> *,</span></span></span><br><span class="line"><span class="function"><span class="params">             <span class="keyword">const</span> QObject *, <span class="keyword">const</span> <span class="keyword">char</span> *,</span></span></span><br><span class="line"><span class="function"><span class="params">             Qt::ConnectionType)</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">connect</span><span class="params">(<span class="keyword">const</span> QObject *, <span class="keyword">const</span> QMetaMethod &amp;,</span></span></span><br><span class="line"><span class="function"><span class="params">             <span class="keyword">const</span> QObject *, <span class="keyword">const</span> QMetaMethod &amp;,</span></span></span><br><span class="line"><span class="function"><span class="params">             Qt::ConnectionType)</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">connect</span><span class="params">(<span class="keyword">const</span> QObject *, <span class="keyword">const</span> <span class="keyword">char</span> *,</span></span></span><br><span class="line"><span class="function"><span class="params">             <span class="keyword">const</span> <span class="keyword">char</span> *,</span></span></span><br><span class="line"><span class="function"><span class="params">             Qt::ConnectionType)</span> <span class="keyword">const</span></span></span><br></pre></td></tr></table></figure>
<p>将上面代码改为Qt4 应该是这样的：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// !!! Qt 4</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QPushButton&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">  <span class="function">QApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"> </span><br><span class="line">  <span class="function">QPushButton <span class="title">button</span><span class="params">(<span class="string">"Quit"</span>)</span></span>;</span><br><span class="line">  QObject::connect(&amp;button, SIGNAL(clicked()),</span><br><span class="line">                     &amp;app,    SLOT(quit()));</span><br><span class="line">  button.show();</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">return</span> app.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>SIGNAL</code> 与 <code>SLOT</code> 是两个宏，将这两个函数转换为字符串。注意，即使quit()是QApplication的 static 函数，也必须传入一个对象指针。这也是 Qt 4 的信号槽语法的局限之处。另外，注意到connect()函数的 signal 和 slot 都是接受字符串，因此，不能将全局函数或者 Lambda 表达式传入connect()。一旦出现连接不成功的情况，Qt 4 是没有编译错误的（因为一切都是字符串，编译期是不检查字符串是否匹配），而是在运行时给出错误。这无疑会增加程序的不稳定性。</p>
<hr>
<h2 id="定义自己的信号与槽"><a href="#定义自己的信号与槽" class="headerlink" title="定义自己的信号与槽"></a>定义自己的信号与槽</h2><p>经典的观察者模式在讲解举例的时候通常会举报纸和订阅者的例子。有一个报纸类Newspaper，有一个订阅者类Subscriber。Subscriber可以订阅Newspaper。这样，当Newspaper有了新的内容的时候，Subscriber可以立即得到通知。在这个例子中，观察者是Subscriber，被观察者是Newspaper。在经典的实现代码中，观察者会将自身注册到被观察者的一个容器中（比如subscriber.registerTo(newspaper)）。被观察者发生了任何变化的时候，会主动遍历这个容器，依次通知各个观察者（newspaper.notifyAllSubscribers()）。</p>
<p>实现代码如下：</p>
<p>newpaper.h<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//!!! Qt5</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QObject&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="comment">////////// newspaper.h</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Newspaper</span> :</span> <span class="keyword">public</span> QObject &#123;</span><br><span class="line">  Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  Newspaper(<span class="keyword">const</span> QString &amp; name) : m_name(name) &#123;&#125;</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">send</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="function">emit <span class="title">newPaper</span><span class="params">(m_name)</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">signals:</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">newPaper</span><span class="params">(<span class="keyword">const</span> QString &amp;name)</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  QString m_name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>reader.h<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//!!! Qt5</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QObject&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDebug&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Reader</span> :</span> <span class="keyword">public</span> QObject &#123;</span><br><span class="line">  Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  Reader() &#123;&#125;</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">receiveNewspaper</span><span class="params">(<span class="keyword">const</span> QString &amp; name)</span> </span>&#123;</span><br><span class="line">    qDebug() &lt;&lt; <span class="string">"Receives Newspaper: "</span> &lt;&lt; name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>main.cc<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QCoreApplication&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"newspaper.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"reader.h"</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">  <span class="function">QCoreApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"> </span><br><span class="line">  <span class="function">Newspaper <span class="title">newspaper</span><span class="params">(<span class="string">"Newspaper A"</span>)</span></span>;</span><br><span class="line">  Reader reader;</span><br><span class="line">  QObject::connect(&amp;newspaper, &amp;Newspaper::newPaper,</span><br><span class="line">                   &amp;reader,    &amp;Reader::receiveNewspaper);</span><br><span class="line">  newspaper.send();</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">return</span> app.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>当我们运行上面的程序时，会看到终端输出 Receives Newspaper: Newspaper A 这样的字样。</p>
<p>首先看 <code>Newspaper</code> 这个类。这个类继承了<code>QObject</code>类。只有继承了 <code>QObject</code> 类的类，才具有信号槽的能力。所以，为了使用信号槽，必须继承 <code>QObject</code>。</p>
<p>至于后面的 <code>Q_OBJECT</code> 宏：</p>
<blockquote>
<p>凡是 <code>QObject</code> 类（不管是直接子类还是间接子类），都应该在第一行代码写上 <code>Q_OBJECT</code>。不管是不是使用信号槽，都应该添加这个宏。这个宏的展开将为我们的类提供信号槽机制、国际化机制以及 Qt 提供的不基于 C++ RTTI 的反射能力。因此，如果你觉得你的类不需要使用信号槽，就不添加这个宏，就是错误的。其它很多操作都会依赖于这个宏。注意，这个宏将由 <code>moc</code>（我们会在后面章节中介绍 moc。这里你可以将其理解为一种预处理器，是比 C++ 预处理器更早执行的预处理器。） 做特殊处理，不仅仅是宏展开这么简单。<code>moc</code> 会读取标记了 <code>Q_OBJECT</code> 的 <code>头文件</code>，生成以 <code>moc_</code> 为前缀的文件，比如 <code>newspaper.h</code> 将生成 <code>moc_newspaper.cpp</code>。你可以到构建目录查看这个文件，看看到底增加了什么内容。注意，由于 <code>moc</code> 只处理头文件中的标记了 <code>Q_OBJECT</code> 的类声明，不会处理 <code>cpp</code> 文件中的类似声明。因此，如果我们的 <code>Newspaper</code> 和<code>Reader</code> 类位于 <code>main.cpp</code> 中，是无法得到 <code>moc</code> 的处理的。解决方法是，我们手动调用 <code>moc</code> 工具处理 <code>main.cpp</code>，并且将 <code>main.cpp</code> 中的 <code>#include &quot;newspaper.h&quot;</code> 改为 <code>#include &quot;moc_newspaper.h&quot;</code> 就可以了。不过，这是相当繁琐的步骤，为了避免这样修改，我们还是将其放在头文件中。许多初学者会遇到莫名其妙的错误，一加上 <code>Q_OBJECT</code> 就出错，很大一部分是因为没有注意到这个宏应该放在头文件中。</p>
</blockquote>
<p><code>Newspaper</code> 类的 <code>public</code> 和 <code>private</code> 代码块都比较简单，只不过它新加了一个 <code>signals</code>。<code>signals</code> 块所列出的，就是该类的信号。信号就是一个个的函数名，返回值是 <code>void</code>（因为无法获得信号的返回值，所以也就无需返回任何值），参数是该类需要让外界知道的数据。信号作为函数名，不需要在 cpp 函数中添加任何实现。</p>
<p><code>Newspaper</code> 类的 <code>send()</code> 函数比较简单，只有一个语句 <code>emit newPaper(m_name);</code>。<code>emit</code> 是 Qt 对 C++ 的扩展，是一个关键字（其实也是一个宏）。<code>emit</code> 的含义是发出，也就是发出 <code>newPaper()</code> 信号。感兴趣的接收者会关注这个信号，可能还需要知道是哪份报纸发出的信号？所以，我们将实际的报纸名字 <code>m_name</code> 当做参数传给这个信号。当接收者连接这个信号时，就可以通过槽函数获得实际值。这样就完成了数据从发出者到接收者的一个转移。</p>
<p><code>Reader</code> 类更简单。因为这个类需要接受信号，所以我们将其继承了 <code>QObject</code>，并且添加了 <code>Q_OBJECT</code>宏。后面则是默认构造函数和一个普通的成员函数。Qt5 中，任何 <code>成员函数</code>、<code>static 函数</code>、<code>全局函数</code> 和 <code>Lambda 表达式</code> 都可以作为槽函数。与信号函数不同，槽函数必须自己完成实现代码。槽函数就是普通的成员函数，因此作为成员函数，也会受到 <code>public</code>、<code>private</code> 等访问控制符的影响。（我们没有说信号也会受此影响，事实上，如果信号是 <code>private</code> 的，这个信号就不能在类的外面连接，也就没有任何意义。）</p>
<p><code>main()</code> 函数中，我们首先创建了 <code>Newspaper</code> 和 <code>Reader</code> 两个对象，然后使用 <code>QObject::connect()</code> 函数。这个函数我们上一节已经详细介绍过，这里应该能够看出这个连接的含义。然后我们调用 <code>Newspaper</code> 的 <code>send()</code> 函数。这个函数只有一个语句：发出信号。由于我们的连接，当这个信号发出时，自动调用 <code>reader</code> 的槽函数，打印出语句。</p>
<p>这样我们的示例程序讲解完毕。我们基于 Qt 的信号槽机制，不需要观察者的容器，不需要注册对象，就实现了观察者模式。</p>
<p>下面给出 Qt4 对应代码</p>
<p>nwespaper.h<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QObject&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Newspaper</span> :</span> <span class="keyword">public</span> QObject &#123;</span><br><span class="line">  Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  Newspaper(<span class="keyword">const</span> QString &amp; name) : m_name(name) &#123;&#125;</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">send</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="function">emit <span class="title">newPaper</span><span class="params">(m_name)</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">signals:</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">newPaper</span><span class="params">(<span class="keyword">const</span> QString &amp;name)</span> <span class="keyword">const</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  QString m_name;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>reader.h<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QObject&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDebug&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Reader</span> :</span> <span class="keyword">public</span> QObject &#123;</span><br><span class="line">  Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  Reader() &#123;&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> slots:</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">receiveNewspaper</span><span class="params">(<span class="keyword">const</span> QString &amp; name)</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">      qDebug() &lt;&lt; <span class="string">"Receives Newspaper: "</span> &lt;&lt; name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>main.cc<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QCoreApplication&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"newspaper.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"reader.h"</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">  <span class="function">QCoreApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"> </span><br><span class="line">  <span class="function">Newspaper <span class="title">newspaper</span><span class="params">(<span class="string">"Newspaper A"</span>)</span></span>;</span><br><span class="line">  Reader reader;</span><br><span class="line">  QObject::connect(&amp;newspaper, SIGNAL(newPaper(QString)),</span><br><span class="line">                   &amp;reader,    SLOT(receiveNewspaper(QString)));</span><br><span class="line">  newspaper.send();</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">return</span> app.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>Newspaper</code> 类没有什么区别。</p>
<p><code>Reader</code> 类，<code>receiveNewspaper()</code> 函数放在了 <code>public slots</code> 块中。在 Qt4 中，槽函数必须放在由 <code>slots</code> 修饰的代码块中，并且要使用访问控制符进行访问控制。其原则同其它函数一样：默认是 <code>private</code> 的，如果要在外部访问，就应该是 <code>public slots</code>；如果只需要在子类访问，就应该是 <code>protected slots</code>。</p>
<p><code>main()</code> 函数中，<code>QObject::connect()</code> 函数，第二、第四个参数需要使用 <code>SIGNAL</code> 和 <code>SLOT</code> 这两个宏转换成字符串。注意 <code>SIGNAL</code> 和 <code>SLOT</code> 的宏参数并不是取函数指针，而是除去返回值的函数声明，并且 <code>const</code> 这种参数修饰符是忽略不计的。</p>
<p>下面说明另外一点，我们提到了“槽函数是普通的成员函数，作为成员函数，会受到 <code>public</code>、<code>private</code>、<code>protected</code> 的影响”，<code>public</code>、<code>private</code> 这些修饰符是供编译器在编译期检查的，因此其影响在于编译期。对于 Qt4 的信号槽连接语法，其连接是在运行时完成的，因此即便是 <code>private</code> 的槽函数也是可以作为槽进行连接的。但是，如果你使用了 Qt5 的新语法，新语法提供了编译期检查（取函数指针），因此取 <code>private</code> 函数的指针是不能通过编译的。</p>
<blockquote>
<p>作者： <a href="https://www.devbean.net" target="_blank" rel="noopener">豆子</a></p>
</blockquote>

          
        
      
    </div>

    
    
    <div>
  
</div>

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/git/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ffshine">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FFshine">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/git/" itemprop="url">git的使用方法记录。</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-31T20:10:07+08:00">2018-01-31</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/代码/" itemprop="url" rel="index"><span itemprop="name">代码</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="安装（Linux）"><a href="#安装（Linux）" class="headerlink" title="安装（Linux）"></a>安装（Linux）</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo pacman -S git</span><br></pre></td></tr></table></figure>
<p>安装完之后设置用户和邮箱<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name <span class="string">"Your Name"</span></span><br><span class="line">$ git config --global user.email <span class="string">"email@example.com"</span></span><br></pre></td></tr></table></figure></p>
<p>以上的 <code>--global</code>指定了, 本系统所有的仓库都会使用这个配置。</p>
<h2 id="新建一个版本库"><a href="#新建一个版本库" class="headerlink" title="新建一个版本库"></a>新建一个版本库</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir mygit</span><br><span class="line">$ <span class="built_in">cd</span> mygit</span><br><span class="line">$ git init</span><br></pre></td></tr></table></figure>
<h2 id="添加文件"><a href="#添加文件" class="headerlink" title="添加文件"></a>添加文件</h2><p><em>假如你在本目录下添加了一个叫<code>readme.txt</code>的文件</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git add readme.txt</span><br><span class="line">$ git commit -m <span class="string">"add readme.txt"</span></span><br></pre></td></tr></table></figure>
<p><code>commit -m</code>后面的参数为此次修改的提交说明.</p>
<h2 id="提交修改后的文件"><a href="#提交修改后的文件" class="headerlink" title="提交修改后的文件"></a>提交修改后的文件</h2><h3 id="查看状态"><a href="#查看状态" class="headerlink" title="查看状态"></a>查看状态</h3><p>如果你修改了<code>redme.txt</code>运行<code>git status</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">(use <span class="string">"git add &amp;lt;file&amp;gt;..."</span> to update what will be committed)</span><br><span class="line">(use <span class="string">"git checkout -- &amp;lt;file&amp;gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">modified:   readme.txt</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">"git add"</span> and/or <span class="string">"git commit -a"</span>)</span><br></pre></td></tr></table></figure>
<p>它告诉你, <code>redme.txt</code>已经被修改过了, 但是还没有准备提交的修改.</p>
<h3 id="比较修改前和修改后的不同"><a href="#比较修改前和修改后的不同" class="headerlink" title="比较修改前和修改后的不同"></a>比较修改前和修改后的不同</h3><p>如果你已经忘记了你修改的内容, 运行<code>git diff</code>比较不同.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git diff readme.txt</span><br><span class="line">diff --git a/readme.txt b/readme.txt</span><br><span class="line">index c4990a0..4cd0f41 100644</span><br><span class="line">--- a/readme.txt</span><br><span class="line">+++ b/readme.txt</span><br><span class="line">@@ -1,2 +1,2 @@</span><br><span class="line"> Git is a distributed version control system.</span><br><span class="line"> -Git is free software distributed ubder the GPL.</span><br><span class="line"> +Git is free software distributed ubder the f.</span><br></pre></td></tr></table></figure>
<p>可以看到, 我把<code>Git is free software distributed ubder the GPL.</code>换成了<code>Git is free software distributed ubder the f.</code>.</p>
<h3 id="提交修改"><a href="#提交修改" class="headerlink" title="提交修改"></a>提交修改</h3><pre class="line-numbers prism-highlight" data-start="1">$ git add reame.txt
$ git commit -m "change GPL to f"
</pre>

<h2 id="版本退回"><a href="#版本退回" class="headerlink" title="版本退回"></a>版本退回</h2><h3 id="查询修改记录"><a href="#查询修改记录" class="headerlink" title="查询修改记录"></a>查询修改记录</h3><p>通过<code>git log</code></p>
<pre class="line-numbers prism-highlight" data-start="1">$ git log
commit eea876296f438267c5a2983b2f31792067558b40 (HEAD -&gt; master)
Author: ffshine &lt;ffshine9@gmail.com&gt;
Date:   Wed Jan 31 20:17:13 2018 +0800

    change GPL to f

commit 4c7884d8021d9b333651c11eb9746d2ada23cf4a
Author: ffshine &lt;ffshine9@gmail.com&gt;
Date:   Wed Jan 31 19:29:55 2018 +0800

    add GPL

commit d79a6a5e90fa4ef7d2a1fb2c788b98307f411311
Author: ffshine &lt;ffshine9@gmail.com&gt;
Date:   Wed Jan 31 19:28:25 2018 +0800

    add distributed

commit 340d6f6d36da7f551db7ca6e78e529088732f21d
Author: ffshine &lt;ffshine9@gmail.com&gt;
Date:   Wed Jan 31 19:25:17 2018 +0800

    wrote a readme file

</pre>

<p>如果记录过多不好查阅的话, 添加<code>--pretty=oneline</code>参数, 所有的log都会在一行显示出来.</p>
<h3 id="回滚"><a href="#回滚" class="headerlink" title="回滚"></a>回滚</h3><p>在git中,有个<code>HEAD</code>指针, 它指向当前的记录,<code>HEAD^</code>指向前一个记录,<code>HEAD^^</code>再往前一个, 以此类推. 当然,前一百个不会让你写一百个^,你可以这样写<code>HEAD~100</code>.</p>
<pre class="line-numbers prism-highlight" data-start="1">$ git raset --hard HEAD^
</pre>

<h3 id="后悔了"><a href="#后悔了" class="headerlink" title="后悔了"></a>后悔了</h3><p>回滚了后悔了怎么办, git每条修改记录创建时, 都会有一个对应的ID. 比如说, 上一条我运行<code>git commit -m &quot;change GPL to f&quot;</code>后, 返回的是:</p>
<pre class="line-numbers prism-highlight" data-start="1">[master eea8762] change GPL to f
</pre>

<p>如果要回到这一条记录, 只需要运行:</p>
<pre class="line-numbers prism-highlight" data-start="1">$ git reset --hard eea8762
</pre>

<p>但是,如果回滚之后, 关闭了窗口, 找不到这条记录了怎么办. 没关系, git已经悄悄记录了你执行的每一条命令,只需要通过<code>git reflog</code>就能查询出来.</p>
<pre class="line-numbers prism-highlight" data-start="1">$ git reflog
    eea8762 (HEAD -&gt; master) HEAD@{0}: commit: change GPL to f
    4c7884d HEAD@{1}: reset: moving to 4c7884d
    d79a6a5 HEAD@{2}: reset: moving to HEAD^
    4c7884d HEAD@{3}: commit: add GPL
    d79a6a5 HEAD@{4}: commit: add distributed
    340d6f6 HEAD@{5}: commit (initial): wrote a readme file
</pre>
          
        
      
    </div>

    
    
    <div>
  
</div>

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/get-and-getline-in-cpp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ffshine">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FFshine">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/get-and-getline-in-cpp/" itemprop="url">c++中的get与getline</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-30T12:17:17+08:00">2018-01-30</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/代码/" itemprop="url" rel="index"><span itemprop="name">代码</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="c-中的cin"><a href="#c-中的cin" class="headerlink" title="c++ 中的cin"></a>c++ 中的cin</h2><p>c++中的<code>cin</code>以空白符（空格 回车 制表）作为分隔符，以回车作为输入结束符。在平时使用中除了输入数字，否则很难避免输入的内容包含空格等特殊字符的情况。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> name1[<span class="number">20</span>];</span><br><span class="line"><span class="keyword">char</span> name2[<span class="number">20</span>];</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; name1 &gt;&gt; name2;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; name1 &lt;&lt; <span class="built_in">endl</span> &lt;&lt; name2 &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure></p>
<p>如果输入<code>barack obama</code>，再按回车。程序直接输出<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">barack</span><br><span class="line">obama</span><br></pre></td></tr></table></figure></p>
<p>在此次输入中，把<code>barack</code>赋值给了<code>name1</code>，把<code>obama</code>赋值给了<code>name2</code>；（此时最后输入的回车符任保存在缓存中）。</p>
<h2 id="cin-getline"><a href="#cin-getline" class="headerlink" title="cin.getline"></a>cin.getline</h2><p>好在c++给了一个解决这个问题的方法。在<code>cin</code>的成员函数中，有一个以回车为分隔符的函数<code>getline()</code>。</p>
<p><code>getline()</code>因为是<code>cin</code>的成员函数。所以使用方法为<code>cin.getline()</code>。他有（一般）两个参数，第一个为接收这行字符串的数组的名称，第二个为读取的字符数。</p>
<p><code>getline()</code>读取某行字符时，会接收最后的回车符，然后把回车符丢弃换成空字符串<code>&#39;\0&#39;</code>，所以如果<code>getline</code>的第二个参数为20，他最多能接收19个字符。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> name1[<span class="number">20</span>];</span><br><span class="line"><span class="keyword">char</span> name2[<span class="number">20</span>];</span><br><span class="line"><span class="built_in">cin</span>.getline(name1,<span class="number">20</span>);</span><br><span class="line"><span class="built_in">cin</span>.getline(name2,<span class="number">20</span>);</span><br></pre></td></tr></table></figure></p>
<h2 id="cin-get"><a href="#cin-get" class="headerlink" title="cin.get"></a>cin.get</h2><p>与此同时，c++也给出了<code>get()</code>，与<code>getline()</code>不同的是，<code>get</code>不会接收最后的回车符（参数与<code>getline</code>一样）。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> name1[<span class="number">20</span>];</span><br><span class="line"><span class="keyword">char</span> name2[<span class="number">20</span>];</span><br><span class="line"><span class="built_in">cin</span>.get(name1,<span class="number">20</span>);</span><br><span class="line"><span class="built_in">cin</span>.get(name2,<span class="number">20</span>);</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; name1 &lt;&lt; name2;</span><br></pre></td></tr></table></figure>
<p>输入<code>barack obama</code>，回车。输出的将是：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">barack obama</span><br></pre></td></tr></table></figure>
<p>因为第一个<code>get</code>函数完成后，<code>\n</code>被留在了缓存中，当执行第二个<code>get</code>时，程序从缓存中读到了一个<code>\n</code>，所以第二个<code>get</code>没有接收到任何参数就结束了。</p>
<p>为了解决这个问题，<code>get</code>还有一个不带参数的形式，这时只能接收一个字符，所以可以通过下面这种方式，把最后的回车用<code>get</code>丢弃。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> name1[<span class="number">20</span>];</span><br><span class="line"><span class="keyword">char</span> name2[<span class="number">20</span>];</span><br><span class="line"><span class="built_in">cin</span>.get(name1,<span class="number">20</span>).get();</span><br><span class="line"><span class="built_in">cin</span>.get(name2,<span class="number">20</span>).get();</span><br></pre></td></tr></table></figure></p>
<p>如果你想保存那个字符，你可以 <code>char a = cin.get();</code>。或者使用<code>get</code>的第三种形式<code>char a; cin.get(a);</code>。</p>
<p>在第一节中说到。<code>cin</code>以回车为输入结束，输入结束后，回车依然留在缓存中。如果你在<code>cin</code>后面紧接着来一个<code>cin.get(string *,int)</code>，你的<code>get</code>可能接收不到任何参数。</p>
<p>所以像上面一样，在<code>cin</code>完之后，应该用一个不带参数的<code>get</code>把回车接收并丢弃掉。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> name1[<span class="number">20</span>],name2[<span class="number">20</span>],a[<span class="number">20</span>];</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; a;   <span class="comment">//or (cin &gt;&gt; a).get();从而不要下面那句。</span></span><br><span class="line"><span class="built_in">cin</span>.get() <span class="comment">//or char ch; cin.get(ch);</span></span><br></pre></td></tr></table></figure>
<p>上面之所以能够<code>cin.get(string *,int).get()</code>或<code>(cin &gt;&gt; a).get()</code>，是因为<code>cin</code>在有参数的情况下，返回的是一个<code>cin</code>对象（<code>cin.get()</code>在没有参数的情况下，返回的是接收的字符）。</p>
<h2 id="get与getline"><a href="#get与getline" class="headerlink" title="get与getline"></a>get与getline</h2><p>如此看来，貌似<code>getline</code>使用起来比<code>get</code>更加方便，那么<code>get</code>存在的意义是什么？</p>
<p>在<code>getline</code>中，当输入的字符超过限制时，<code>getline</code>会读取她所需要的字符，并阻断接下来的输入。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> name1[<span class="number">5</span>];</span><br><span class="line"><span class="keyword">char</span> name2[<span class="number">5</span>];</span><br><span class="line"><span class="built_in">cin</span>.getline(name1,<span class="number">5</span>).getline(name2,<span class="number">5</span>);</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"name1: "</span> &lt;&lt; name1 &lt;&lt; <span class="string">"\tname2: "</span> &lt;&lt; name2;</span><br></pre></td></tr></table></figure>
<p>输入<code>obama\n</code>，输出的是：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name1: obam</span><br></pre></td></tr></table></figure>
<p><code>get</code>不会阻断输入，他只会接收自己需要的字符，其余的将留在缓存中：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> name1[<span class="number">5</span>];</span><br><span class="line"><span class="keyword">char</span> name2[<span class="number">5</span>];</span><br><span class="line"><span class="built_in">cin</span>.get(name1,<span class="number">5</span>).get(name2,<span class="number">5</span>);</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"name1: "</span> &lt;&lt; name1 &lt;&lt; <span class="string">"\tname2: "</span> &lt;&lt; name2;</span><br></pre></td></tr></table></figure>
<p>输入<code>obama\n</code>,输出：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">char1: obam     char2: a</span><br></pre></td></tr></table></figure>
<p>所以当我们不知道该输入是因为<code>\n</code>而结束，还是因为字符超出而结束时，只要使用<code>get</code>，然后用一个<code>char ch;cin.get(ch)</code>或者<code>char ch = cin.get()</code>接收缓存中的第一个字符，如果是回车符，说明正常结束，如果是一个字符，说明输入超过字符限制。</p>
<h2 id="string与cin-get"><a href="#string与cin-get" class="headerlink" title="string与cin.get"></a>string与cin.get</h2><p>因为引入string类型之前，<code>cin</code>就有了<code>get</code>与<code>getline</code>方法。所以<code>cin.get</code>与<code>cin.getline</code>并不能处理<code>string</code>类。</p>
<p>所以处理string类的<code>getline</code>方法为：<code>getline(cin,str)</code>,<code>cin</code>作为参数传入函数<code>string</code>为可扩展类型，所以不需要后面的边界参数，<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> name;</span><br><span class="line">getline(<span class="built_in">cin</span>,name);j</span><br></pre></td></tr></table></figure></p>
<p><strong>没有对应string的get方法</strong></p>

          
        
      
    </div>

    
    
    <div>
  
</div>

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/yameiniys/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ffshine">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FFshine">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/yameiniys/" itemprop="url">亚美尼亚大屠杀</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-12-30T00:49:09+08:00">2017-12-30</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/历史/" itemprop="url" rel="index"><span itemprop="name">历史</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>时间：</strong><br>1915～1917 年间<br><strong>地点：</strong><br>奥斯曼土耳其帝国<br><strong>事件定义</strong><br>针对亚美尼亚人的种族灭绝事件</p>
<hr>
<h2 id="百科词条"><a href="#百科词条" class="headerlink" title="百科词条"></a>百科词条</h2><p>亚美尼亚大屠杀指的是土耳其对其辖境内亚美尼亚人基督徒进行的种族屠杀。其受害者数量达到150万之众。<br>土耳其政府至今拒绝承认这是一起官方发起的有预谋的屠杀行为，但亚美尼亚、俄罗斯和多数西方国家皆认为这是一起可以和犹太人大屠杀相提并论的由一国政府蓄意进行的种族灭绝行为，一些土耳其学者（如奥尔汉·帕穆克等）也持有相同观点。目前共有阿根廷、比利时、加拿大、法国、希腊、意大利、黎巴嫩、荷兰、俄罗斯、瑞典等二十多个国家官方承认这是一场种族屠杀。欧洲议会也承认“亚美尼亚大屠杀”事件，称这宗屠杀为“违反人性的罪行”。联合国防止歧视和保护少数小组委员会也将事件定性为“种族灭绝”&lt;/h2百科词条&lt;&gt;</p>
<hr>
<h2 id="经过："><a href="#经过：" class="headerlink" title="经过："></a>经过：</h2><p>在奥斯曼土耳其境内，生活着一群信奉基督教的亚美尼亚人，他们在伊斯兰教的奇米制度下，享有这有限的自由。但他们只是帝国的“二等公民”，在各种地方饱受伊斯兰教徒的歧视。</p>
<p>1839年，在英法俄的压力下，土耳其政府推行坦齐马特改革去改善少数族裔的处境，但成效不大。到了1870年代末，希腊及几个巴尔干国家已经不能忍受，先后摆脱了奥斯曼的统治。亚美尼亚人在这段时间没有积极争取独立，使他们得到了“忠心米利特”（土耳其语：millet-isadıka）的称呼。</p>
<p>从1860年代中期至1870年代初，亚美尼亚人开始要求土耳其政府改善他们的待遇。并为此做出了巨大的努力，虽然有英法俄等基督教国家的帮助，但取得的成效几乎为零。</p>
<p>在1877年至1878年的俄土战争结束后，亚美尼亚人开始更倾向以俄国作为他们安全的保证人。在俄国等列强的压力之下，土耳其政府在《柏林条约》承诺了。将以改革实现亚美尼亚人自治。</p>
<p>新苏丹阿卜杜勒·哈米德二世于1876年登位。自从《柏林条约》签订后的改革期开始，哈米德二世试图搁置那些改革，声称亚美尼亚人在那些省份未占大多数，又称亚美尼亚人报告受苛待的事大多是夸大或不实。1890年，哈米德二世创建了一支准军事队伍“哈米迪耶”（Hamidiye），由库尔德族非正规人员组成，任务是“随他们想怎样的去处理亚美尼亚人”。由于奥斯曼官员蓄意在亚美尼亚人聚居市镇引发叛乱（通常是因为税收过重），例如1894年的“沙逊抵抗”（Sasun Resistance），这些部队越来越多被用作以压制及屠杀手段去对付亚美尼亚人。亚美尼亚人成功击退这些部队，于1895年提请列强关注这些越轨行为，而列强随即谴责土耳其政府。</p>
<p>列强迫使哈米德二世于1895年10月签署新的一揽子改革，以抑制“哈米迪耶”的权力，可是与《柏林条约》规定的改革一样，从未得到落实。1895年10月1日，2000个亚美尼亚人在君士坦丁堡集会请愿，要求落实改革，遭奥斯曼警察用武力驱散。未几，君士坦丁堡发生了一些亚美尼亚人被屠杀事件，随后席卷其他亚美尼亚人聚居的比特利斯省、迪亚巴克尔省、Harput省、锡瓦斯省、特拉布宗省及凡城省。遇害的亚美尼亚人数目有不同估计，但是欧洲人对这次被称为哈米德大屠杀的暴行的文件记录把数字定于10万至30万人之间。</p>
<p>1908年7月24日，哈米德二世被军官发动政变推翻，恢复君主立宪制，政变者来自青年土耳其人运动，欲改革帝国的施政及推行现代化以追上欧洲水平。该运动由两大类人组成：世俗主义的自由立宪主义者，及民族主义者。前者比较支持民主，愿意接纳亚美尼亚人加入他们；后者则对亚美尼亚相关议题及亚美尼亚人常找欧洲人求助的事采取较不容忍的立场。在青年土耳其人的众多派系中，有一个叫“统一与进步委员会”（Committee of Unionand Progress，简称CUP）的政治组织。该组织最初是一个由萨洛尼卡的军官组成的秘密结社，在军方内日渐壮大。</p>
<p>1909年4月13日发生了一场反政变，一些奥斯曼军官与伊斯兰神学生联手，意图把国家恢复苏丹及伊斯兰教法的统治。反动派部队与新政府部队发生战斗，最后新政府平息了叛乱，把反对派领导人送交军法审讯。该事件虽然最初是针对新成立的青年土耳其人政府，却殃及亚美尼亚人，他们被视为支持恢复宪法而遭受杀戮。当奥斯曼军队被召来时，许多记载指明他们没有试图制止暴行，反而加入抢掠阿达纳省的亚美尼亚人飞地。约15000至30000个亚美尼亚人在“阿达纳屠杀”中遇害。</p>
<p>1914年11月，奥斯曼帝国加入第一次世界大战的同盟国一方。战争部长恩维尔·帕夏（Enver Pasha）的部队在萨瑞卡密斯战役被俄军打得大败，他返回君士坦丁堡后，公开指责萨瑞卡密斯那里的亚美尼亚人主动协助俄国人，导致他打败仗。</p>
<p>1915年2月25日，战争部长恩维尔下令所有军方单位把部队内的亚美尼亚人移走，改编他们入无武装的劳动营。恩维尔解释此举为“恐怕他们会串通俄国人”。<br>把部队的亚美尼亚兵士改送到被动的、无武装的后勤部门是随后的种族灭绝的重要一步。根据《The Memoirs of Naim Bey》所述，消灭那些营的亚美尼亚人是以“统一与进步委员会”名义进行的有预谋计划的一部分，那些亚美尼亚兵中有许多人被当地的土耳其人团伙杀害。</p>
<p>1915年4月19日，凡城省长杰夫戴特·贝伊（Jevdet Bey）以征兵为理由，要求凡城立即向他提供4000人。亚美尼亚人认为他有阴谋，没有依从。杰夫戴特早前已在附近村庄展开屠杀，表面上用搜查武器为借口。亚美尼亚人提议交出500人再加豁免金代替其余的人，以换取时间，可是杰夫戴特指控亚美尼亚人“叛乱”，表示他有决心不惜任何代价去“粉碎”它。他宣称：“如果叛乱分子敢开一枪，我就杀掉每个基督教徒男人、女人及（指向自己膝盖）有这么高的每个儿童。”</p>
<p>1915年4月20日，当一个亚美尼亚女人遭调戏，两个前来帮她的亚美尼亚男人被土军杀死后，凡城的武装冲突开始。亚美尼亚防守者有1500个枪手，配备300支步枪、1000支手枪及其它陈旧武器，保护了亚美尼亚居民3万人及难民1万5千人。后来尼古拉·尤登尼奇的俄军前来解救他们，冲突才结束。</p>
<p>1915年4月24日晚，土耳其政府一夜间拘捕了二百多位君士坦丁堡的亚美尼亚知识分子及社区领袖，许多人在后来被杀害。</p>
<p>1915年5月，内政部长塔拉特·帕夏（穆罕默德·塔拉特）要求内阁及大维奇尔Said Halim Pasha立法准许迁移及重新安置亚美尼亚人到其它地方，理由是“国内有些地方出现了亚美尼亚人的暴乱及屠杀”。塔拉特特别提到凡城事件，将措施扩展至“暴乱及屠杀”有可能影响高加索战区安全的地区。后来迁徙居民的范围扩大至其它省份的亚美尼亚人。1915年5月27日，奥斯曼帝国议会通过《特西尔法》（Tehcir Law，或称《驱逐临时法》），容许政府及军方驱逐任何被认为威胁国家安全的人，但是设有条款保障被驱逐者的财产权。到9月又有新法例《关于被驱逐者遗留的财产、债务及资产法》（又被称为《征用及充公临时法》）被提出，根据该法例，亚美尼亚人所有“遗留”的货物及财产归政府所有。</p>
<p>1915年9月13日，奥斯曼帝国议会通过新法例，亚美尼亚人的所有财产可被政府充公。</p>
<p>亚美尼亚人的队伍被迫前往叙利亚的Deirez—Zor镇及周围荒漠。土耳其政府在驱逐过程中不仅没有提供任何帮助，负责押送亚美尼亚人的奥斯曼军队反而纵容其他人抢劫、杀害及强奸那些亚美尼亚人，许多时甚至自己也有份参与其中。既被夺去随身财物，又被赶入荒漠的亚美尼亚人，死者数以十万计。</p>
<p>1919年，苏丹穆罕默德六世下令国内的军事法庭就帝国卷入第一次世界大战的责任对“统一与进步委员会”的成员展开审讯。军事法庭指责“统一与进步委员会”的成员进行一场不符合米利特概念的战争。亚美尼亚人的事件被掀出来成为指控。在这些审讯中产生的文件大多在后来被移交到国际性审讯那里。1919年1月，一份呈上穆罕默德六世的报告指控了超过130个疑犯，大多数是高官。军事法庭认定“统一与进步委员会”蓄意通过“特别组织”在肉体上消灭亚美尼亚人。<br>“三大帕夏”，包括塔拉特及恩维尔，在一次大战结束时逃到国外。1919年于君士坦丁堡举行的审讯把缺席的这三人判处死刑。军事法庭解散了“统一与进步委员会”，充公了它及那些被判有罪的人的资产。“三大帕夏”中有两人后来被亚美尼亚复仇者刺杀。</p>
<p>时至今日，土耳其共和国仍不承认该事件。他们认为亚美尼亚人在“迁移”或“驱逐”过程中的死亡不应被视为“种族灭绝”，理由分别有：那些杀人事件不是由政府蓄意策划的；亚美尼亚人作为一个文化上的群体，可能会同情俄国而构成威胁，杀死他们是合理的；亚美尼亚人只是挨饿；或指有“亚美尼亚匪帮”作恶之类等。有些人用语义或“不适用于那个时代”作为理由去否定这次屠杀是“种族灭绝”（英文的genocide（种族灭绝）一字直到1943年才诞生）。</p>
<hr>
<p>参考：</p>
<blockquote>
<p>百度百科</p>
</blockquote>

          
        
      
    </div>

    
    
    <div>
  
</div>

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/xkx/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ffshine">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FFshine">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/xkx/" itemprop="url">侠客行</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-12-27T11:34:00+08:00">2017-12-27</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/古文摘/" itemprop="url" rel="index"><span itemprop="name">古文摘</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>李白<br>赵客缦胡缨，吴钩霜雪明。<br>银鞍照白马，飒沓如流星。<br>十步杀一人，千里不留行。<br>事了拂衣去，深藏身与名。<br>闲过信陵饮，脱剑膝前横。<br>将炙啖朱亥，持觞劝侯嬴。<br>三杯吐然诺，五岳倒为轻。<br>眼花耳热后，意气素霓生。<br>救赵挥金槌，邯郸先震惊。<br>千秋二壮士，烜赫大梁城。<br>纵死侠骨香，不惭世上英。<br>谁能书阁下，白首太玄经。</p>

          
        
      
    </div>

    
    
    <div>
  
</div>

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/mrf/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ffshine">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FFshine">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/mrf/" itemprop="url">美人赋三篇</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-11-12T00:02:29+08:00">2017-11-12</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/古文摘/" itemprop="url" rel="index"><span itemprop="name">古文摘</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>美人赋</strong><br><em>司马相如</em></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;司马相如，美丽闲都，游于梁王，梁王悦之。邹阳谮之于王曰：“相如美则美矣，然服色容冶，妖丽不忠，将欲媚辞取悦，游王后宫，王不察之乎？”<br>&nbsp;&nbsp;&nbsp;&nbsp;王问相如曰：“子好色乎？”相如曰：“臣不好色也。”王曰：“子不好色，何若孔墨乎？”相如曰：“古之避色，孔墨之徒，闻齐馈女而遐逝，望朝歌而回车，譬犹防火水中，避溺山隅，此乃未见其可欲，何以明不好色乎？若臣者，少长西土，鳏处独居，室宇辽廓，莫与为娱。臣之东邻，有一女子，云发丰艳，蛾眉皓齿，颜盛色茂，景曜光起。恒翘翘而西顾，欲留臣而共止。登垣而望臣，三年于兹矣，臣弃而不许。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;“窃慕大王之高义，命驾东来，途出郑卫，道由桑中。朝发溱洧，暮宿上宫。上宫闲馆，寂寞云虚，门阁昼掩，暧若神居。臣排其户而造其室，芳香芬烈，黼帐高张。有女独处，婉然在床。奇葩逸丽，淑质艳光。睹臣迁延，微笑而言曰：‘上客何国之公子！所从来无乃远乎？’遂设旨酒，进鸣琴。臣遂抚琴，为幽兰白雪之曲。女乃歌曰：‘独处室兮廓无依，思佳人兮情伤悲！有美人兮来何迟，日既暮兮华色衰，敢托身兮长自思。’玉钗挂臣冠，罗袖拂臣衣。时日西夕，玄阴晦冥，流风惨冽，素雪飘零，闲房寂谧，不闻人声。于是寝具既陈，服玩珍奇，金鉔薰香，黼帐低垂，裀褥重陈，角枕横施。女乃驰其上服，表其亵衣。皓体呈露，弱骨丰肌。时来亲臣，柔滑如脂。臣乃脉定于内，心正于怀，信誓旦旦，秉志不回。翻然高举，与彼长辞。”</p>
<p><strong>神女赋</strong><br>_宋玉_</p>
<p> &nbsp;&nbsp;&nbsp;&nbsp;楚襄王与宋玉游于云梦之浦，使玉赋高唐之事。其夜玉寝，果梦与神女遇，其状甚丽，玉异之。明日，以白王。王曰：“其梦若何？”玉对曰：“晡夕之后，精神恍忽，若有所喜，纷纷扰扰，未知何意？目色仿佛，乍若有记：见一妇人，状甚奇异。寐而梦之，寤不自识；罔兮不乐，怅然失志。于是抚心定气，复见所梦。”王曰：“状何如也？”玉曰：<ins datetime="2017-11-11T16:54:09+00:00">“茂矣美矣，诸好备矣。盛矣丽矣，难测究矣。上古既无，世所未见，瑰姿玮态，不可胜赞。其始来也，耀乎若白日初出照屋梁；其少进也，皎若明月舒其光。须臾之间，美貌横生：晔兮如华，温乎如莹。五色并驰，不可殚形。详而视之，夺人目精。其盛饰也，则罗纨绮绩盛文章，极服妙采照万方。振绣衣，被袿裳，秾不短，纤不长，步裔裔兮曜殿堂，忽兮改容，婉若游龙乘云翔。嫷披服，侻薄装，沐兰泽，含若芳。性合适，宜侍旁，顺序卑，调心肠。”</ins>王曰：“若此盛矣，试为寡人赋之。”玉曰：“唯唯。”</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;<ins datetime="2017-11-11T16:45:59+00:00">夫何神女之姣丽兮，含阴阳之渥饰。披华藻之可好兮，若翡翠之奋翼。其象无双，其美无极；毛嫱鄣袂，不足程式；西施掩面，比之无色。近之既妖，远之有望，骨法多奇，应君之相，视之盈目，孰者克尚。私心独悦，乐之无量；</ins>交希恩疏，不可尽畅。他人莫睹，王览其状。其状峨峨，何可极言。貌丰盈以庄姝兮，苞温润之玉颜。眸子炯其精朗兮，瞭多美而可视。眉联娟以蛾扬兮，朱唇的其若丹。素质干之醲实兮，志解泰而体闲。既姽婳于幽静兮，又婆娑乎人间。宜高殿以广意兮，翼故纵而绰宽。动雾以徐步兮，拂声之珊珊。望余帷而延视兮，若流波之将澜。奋长袖以正衽兮，立踯躅而不安。澹清静其愔嫕兮，性沉详而不烦。时容与以微动兮，志未可乎得原。意似近而既远兮，若将来而复旋。褰余帷而请御兮，愿尽心之惓惓。怀贞亮之洁清兮，卒与我兮相难。陈嘉辞而云对兮，吐芬芳其若兰。精交接以来往兮，心凯康以乐欢。神独亨而未结兮，魂茕茕以无端。含然诺其不分兮，扬音而哀叹！薄怒以自持兮，曾不可乎犯干。<br>&nbsp;&nbsp;&nbsp;&nbsp;于是摇佩饰，鸣玉鸾；奁衣服，敛容颜；顾女师，命太傅。欢情未接，将辞而去；迁延引身，不可亲附。似逝未行，中若相首；目略微眄，精采相授。志态横出，不可胜记。意离未绝，神心怖覆；礼不遑讫，辞不及究；愿假须臾，神女称遽。徊肠伤气，颠倒失据，黯然而暝，忽不知处。情独私怀，谁者可语？惆怅垂涕，求之至曙。</p>
<p><strong>登徒子好色赋</strong><br>_宋玉_</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;大夫登徒子侍于楚王，短宋玉曰：”玉为人体貌闲丽，口多微辞，又性好色。愿王勿与出入后宫。<br>&nbsp;&nbsp;&nbsp;&nbsp;王以登徒子之言问宋玉。玉曰：”体貌闲丽，所受于天也；口多微辞，所学于师也；至于好色，臣无有也。”王曰：”子不好色，亦有说乎？有说则止，无说则退。”玉曰：”天下之佳人莫若楚国，楚国之丽者莫若臣里，臣里之美者莫若臣东家之子。东家之子，<ins datetime="2017-11-11T16:45:59+00:00">增之一分则太长，减之一分则太短；著粉则太白，施朱则太赤；眉如翠羽，肌如白雪；腰如束素，齿如含贝；嫣然一笑，惑阳城，迷下蔡。</ins>然此女登墙窥臣三年，至今未许也。登徒子则不然：其妻蓬头挛耳，齞唇历齿，旁行踽偻，又疥且痔。登徒子悦之，使有五子。王孰察之，谁为好色者矣。<br>&nbsp;&nbsp;&nbsp;&nbsp;是时，秦章华大夫在侧，因进而称曰：”今夫宋玉盛称邻之女，以为美色，愚乱之邪；臣自以为守德，谓不如彼矣。且夫南楚穷巷之妾，焉足为大王言乎？若臣之陋，目所曾睹者，未敢云也。”王曰：”试为寡人说之。”大夫曰：”唯唯。臣少曾远游，周览九土，足历五都。出咸阳、熙邯郸，从容郑、卫、溱、洧之间。是时向春之末，迎夏之阳，鸧鹒喈喈，群女出桑。此郊之姝，华色含光，体美容冶，不待饰装。臣观其丽者，因称诗曰：’遵大路兮揽子祛’。赠以芳华辞甚妙。于是处子怳若有望而不来，忽若有来而不见。意密体疏，俯仰异观；含喜微笑，窃视流眄。复称诗曰：’寐春风兮发鲜荣，洁斋俟兮惠音声，赠我如此兮不如无生。’因迁延而辞避。盖徒以微辞相感动。精神相依凭；目欲其颜，心顾其义，扬《诗》守礼，终不过差，故足称也。<br>&nbsp;&nbsp;&nbsp;&nbsp;于是楚王称善，宋玉遂不退。</p>

          
        
      
    </div>

    
    
    <div>
  
</div>

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/linux-grub/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ffshine">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FFshine">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/linux-grub/" itemprop="url">linux 开机出现grub rescue的恢复方法。</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-10-19T13:16:45+08:00">2017-10-19</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>昨天，微软推送了win10的秋季大更新，我也及时接收了。但在更新重启时，正常的grub引导界面进不去了。屏幕上只出现<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub rescue &gt;</span><br></pre></td></tr></table></figure></p>
<p>根据百度的方法</p>
<pre class="line-numbers prism-highlight" data-start="1">
    grub rescue &gt;ls
    grub rescue &gt;(hd0),(hd0,gpt5),(hd0,gpt4),(hd0,gpt3),(hd0,gpt2),(hd0,gpt1),(hd1)(....)
</pre>

<p>我明明记得第一个硬盘只有四个分区（efi，windows保留分区，win10系统分区，manjaro系统分区），这会儿怎么出现五个，应该是微软搞的鬼。接下来弄清楚grub到底在那个分区。</p>
<p>执行</p>
<pre class="line-numbers prism-highlight" data-start="1">grub rescue &gt; ls (hd0,gpt5)/boot/grub
grub rescue &gt; .....
</pre>

<p>如果系统在gtp5的话，它会列出对应的文件，如果不在就会报错。一个一个试。</p>
<pre class="line-numbers prism-highlight" data-start="1">grub rescue &gt;set root=(hd0,gpt5)
grub rescue &gt;set prefix=(hd0,gpt5)/boot/grub
grub rescue &gt;insmod normal
grub rescue &gt;normal
</pre>

<p>这时候应该能启动到熟悉的grub引导界面，但此时并没有完全修复，应该启动linux</p>
<p>执行以下命令，重新生成grub就可以了。</p>
<pre class="line-numbers prism-highlight" data-start="1">sudo update-grub
sudo grub-install /dev/sda
sudo reboot
</pre>

<p>还有一种思路，启动不了不就是因为从磁盘的第四个分区变成了第五个吗，我把第四个分区删掉不就恢复了吗？<br>所以，可以进入pe，把没什么用的第四个分区删掉，再扩展到第三个分区，这时重启就恢复原样了。</p>
<blockquote>
<p>参考：<a href="https://www.douban.com/note/66041888/" target="_blank" rel="noopener">grub rescue模式下修复</a></p>
</blockquote>

          
        
      
    </div>

    
    
    <div>
  
</div>

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/linux-xyw/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ffshine">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FFshine">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/linux-xyw/" itemprop="url">linux连接校园网的暂时解决方法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-10-17T23:05:09+08:00">2017-10-17</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>对于天朝各大群体的网络环境，我不想做过多评论。我只在此记录我遇到问题的解决及方法。<br>一般要客户端验证的校园网都与Linux无缘。就算有第三方大神开发出linux端的拨号工具，也抵挡不住多久就会因为运营商的升级而生效。比如我以前用的netkeeper的linux版<a href="https://github.com/purpleroc/OpenKeeper" target="_blank" rel="noopener">openkeeper</a>也在电信最近一次升级中失效。最近，无意中发现一种能够解决这个问题的方法，只要你手机能连WiFi，linux就一定能连。网上搜了一下，没有发现类似资料。大概算是本人原创吧。</p>
<h1 id="材料"><a href="#材料" class="headerlink" title="材料:"></a>材料:</h1><ul>
<li>安卓手机一部</li>
<li>数据线一根</li>
</ul>
<h1 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h1><p><ll>1. 手机连接校园网，并拨号，（按照平时用手机一样，当然流量多的可以无视)</ll></p>
<ol start="2">
<li>2. 用数据线连接linux</li>
<li>3. 打开手机的USB网络共享<br>MIUI： 设置&gt;&gt;更多连接方式&gt;&gt;USB网络共享<img src="http://oohgvcz60.bkt.clouddn.com/Screenshot_2017-10-17-22-48-25-554_com.android.settings.png" alt="MIUI截图"></li>
<li>Flyme：设置&gt;&gt;便携式热点&gt;&gt;USB网络共享<img src="http://oohgvcz60.bkt.clouddn.com/S71017-22221511.jpg" alt="USB网络共享"></li>
<li>4. 拔网线，断WiFi，ping百度。</li>
</ol>
<p>这是100M电信用speedtest测出来的网速,实际体验和win下联网线没差多少。<br><img src="http://oohgvcz60.bkt.clouddn.com/Screenshot%20from%202017-10-17%2022-58-55.png" alt="wangsu"><br>测试可用的系统：Manjaro17，centos7，Ubuntu16.04，kali2017，debian8。</p>
<p>如果不被封杀的话，这应该是目前为止最完美的解决方法了，目前一部能联网的安卓机也不难找。但缺点就是每次切换系统都要拔手机，应为如果在win10下开启USB共享，win10会卡。。卡。。卡死。。<br>不知道今晚推送的秋季更新里会不会修复这个问题。</p>
<hr>
<hr>
<hr>
<font color="red">2017-11-1更新</font>

<p>现在,我发现了更加方便的方法(非原创),原理是:用一台手机通过正常的方式用拨号软件拨号,然后设置路由器上网方式为固定ip,MAC ip等改为手机信息,让电信终端以为路由器就是你已经拨号的手机.<br>但缺点就是由于ip地址冲突,手机不能上网,你只要重新连接设置好的路由器就行.<br>然后长时间在线后容易断,此时你要按照以前的连接方式重新设置路由器(连lan口,上网方式为自动获取)再重新用手机拨号上网.再接路由器wan口,固定方式上网.略为麻烦.我的推荐的解决方式 有两种.</p>
<ol>
<li>买一个网线分线器,两个路由器,把墙上的网线分成两根,一根按照普通方式连接(lan口),一根接wan口.你的手机按照普通方式连接lan口的路由器,拨号网.然后再设置路由器,如果断网,用手机正常拨号一次就行了.</li>
<li>通过连接隔壁寝室的跟你同一个运营商的wifi重新拨号</li>
</ol>
<hr>
<p>以前电信还有 一个叫Simple Netkeeper的方式破解,但是我们学校怎么都没用,可能是我理工自校情在此.我们学校并没有所谓的心跳包,所以还不算太坑的,所以对于有心跳包的同学,这种固定ip的方法是不适用的,除非你能够不厌其烦的十几分钟连一次.</p>

          
        
      
    </div>

    
    
    <div>
  
</div>

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">ffshine</p>
              <p class="site-description motion-element" itemprop="description">个人笔记</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">categories</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ffshine</span>

  

  
</div>




  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Mist</a></div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.4"></script>



  



	





  





  










  





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  

  
  

  

  

  

  

</body>
</html>
